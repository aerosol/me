#!/bin/bash
BADGE=$1
touch $BADGE
DISTANCE=$(cat _activities/*.json | jq -c '. | select(.activityType.typeKey == "running")' | jq -n '[inputs | .distance] | add')

cat > $BADGE << EOF
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><title>Running</title><g id="artwork"><g id="_21_running" data-name="21_running"><rect x="121.57" y="408.65" width="25.54" height="12" style="fill:#ddd3d4"/><rect x="63.95" y="336.94" width="20.77" height="12" style="fill:#ddd3d4"/><rect x="123.95" y="298.88" width="20.77" height="12" style="fill:#ddd3d4"/><rect x="100.56" y="336.94" width="72.3" height="12" style="fill:#ddd3d4"/><rect x="31.06" y="298.88" width="72.31" height="12" style="fill:#ddd3d4"/><path d="M316.19,261.19l20.32-40.32,104.18-117.8L370.34,50.16A10.75,10.75,0,0,0,355,52.69L279.15,163.76l-22.9,10.54-1.85-4.38a10.1,10.1,0,0,0-13.26-5.35l-72,30.76a41.25,41.25,0,0,0-22.08,53.26L210,408.65H158.66v12h62l36.47,34.57c6.4,6.17,19.37,8.41,28.25,8.41H326.1V434.9a33.79,33.79,0,0,0-23.36-32.15l-16.08-53.09,29.39-88.73C316.1,261,316.15,261.1,316.19,261.19Z" style="fill:#dcd3d4"/><path d="M397.12,45.75,307.53,176.92l-17.11,7.75s3.3,9.32-10.79,18.44-2.72,47.79,19.06,45.75,42.67-7,53.26,14.68l20.32-40.32,104.18-117.8Z" style="fill:#f3b5af"/><path d="M327.92,414.88a33.8,33.8,0,0,1,33.8,33.8v7a6.57,6.57,0,0,1-6.57,6.57H315.44a34.32,34.32,0,0,1-23.82-9.61l-53.24-51.3L174.14,241a17.73,17.73,0,0,1,9.49-22.9l93.13-39.78A10.09,10.09,0,0,1,290,183.71l1.93,4.58a2.42,2.42,0,0,1-1.24,3.15h0a29.72,29.72,0,0,0-15.42,38.14h0a29.71,29.71,0,0,0,34.81,17.8l5.83-1.46a29.09,29.09,0,0,1,34.74,19.22l2.07,6.36-30.46,91.95,16.58,54.76" style="fill:#f2463e"/><path d="M294.19,188.14a2.42,2.42,0,0,1-1.24,3.15,29.7,29.7,0,0,0-15.9,17.33c-9.66,11.16-28.59,36.59-20.29,89.5,10.53,67.1-7.16,75.76-22,89.49L176.37,240.89a17.73,17.73,0,0,1,9.49-22.9L279,178.2a10.09,10.09,0,0,1,13.25,5.35Z" style="fill:#dc4038"/><path d="M363.58,442.48H322.43A22.1,22.1,0,0,1,305.89,435l-20.49-23.1a41.33,41.33,0,0,0-37.95-12l-6.65,1.32,55.57,54.83a32.8,32.8,0,0,0,23,9.45h44.17Z" style="fill:#dcd3d4"/><path d="M206.2,210.88l31,77.67s7,21.34-21.18,48.92l-39.47-95.09c-3.71-9.41,2.95-20.47,12.38-24.13Z" style="fill:#fff"/><path d="M228.55,321.92a91.6,91.6,0,0,1-12.94,15.55l-39.47-95.09c-3.13-7.93,2.86-18,9.91-22.9Z" style="fill:#dcd3d4"/><rect x="278.71" y="335.62" width="16.13" height="12" transform="translate(-100.54 562.84) rotate(-79.72)" style="fill:#fff"/><rect x="269.82" y="294" width="49" height="12" transform="translate(-53.39 536.06) rotate(-79.72)" style="fill:#fff"/><rect x="426" y="457.63" width="23.97" height="12" style="fill:#142546"/><rect x="42.55" y="457.63" width="35" height="12" style="fill:#142546"/><path d="M370.14,457.06v-7a39.86,39.86,0,0,0-24.48-36.73L331,364.87l12.82-38.68c4.48,5.9,12,11.35,23.92,14.52l3.07-11.6c-16.64-4.41-20.19-13.2-20.8-18.25l.52,0a24.75,24.75,0,0,0,8.49-48l18.27-36.26L480.94,109.39l-9-8L367.26,219.83,351.2,251.7a35.21,35.21,0,0,0-34.31-10.26l-5.82,1.46a23.72,23.72,0,0,1-15.48-44.65,8.48,8.48,0,0,0,4.81-9.31l11.43-7.69L402.07,49.13l-9.91-6.76L303.23,172.58,295,178.11a16.09,16.09,0,0,0-18.17-3.93L183.69,214A23.87,23.87,0,0,0,171,244.61l64.72,161.53,53.43,51.49H94.55v12H411.21v-12h-41.1C370.12,457.44,370.14,457.25,370.14,457.06ZM352.93,298.65l7-21.14a12.76,12.76,0,0,1-7,21.14ZM222.76,341.56l12.74-19.62a47.53,47.53,0,0,0,4.33-43.3c-3.68-9.31-8.62-21.69-14.68-36.79L214,246.33c6.05,15.07,11,27.43,14.66,36.72a35.54,35.54,0,0,1-3.23,32.35l-8.14,12.54-35.17-87.79A11.79,11.79,0,0,1,188.41,225l14.52-6.2,7.66,19,11.13-4.48c-3.19-7.92-5.95-14.78-7.76-19.25l67.58-28.87a4.09,4.09,0,0,1,5.37,2.17l.64,1.52A35.72,35.72,0,0,0,314,254.54l5.83-1.46a23.16,23.16,0,0,1,27.57,15.25l1.46,4.49-5.27,15.93H330.45v12h9.14l-2.47,7.47H325.05v12h8.09l-2.47,7.47H318.82v12h7.87l-2.47,7.46h-9.9v12h5.92l-1.84,5.56,13.8,45.56c-.61,0-1.23,0-1.86,0H326.8l-22.19-40,21.93-100.66L314.81,267,291.92,372l21.16,38.19h-5.55v12h22.81a27.85,27.85,0,0,1,25,15.7H322.43a16.1,16.1,0,0,1-12.05-5.42l-20.49-23.11-.16-.16a47.11,47.11,0,0,0-43.45-13.72l-1.77.35Zm95.1,116.07a28.18,28.18,0,0,1-19.66-7.93l-44.66-43A35.17,35.17,0,0,1,281,417.44l20.41,23a28.1,28.1,0,0,0,21,9.46h35.71v7.14a.57.57,0,0,1-.57.57Z" style="fill:#142546"/><rect x="127.51" y="398.45" width="25.54" height="12" style="fill:#142546"/><rect x="164.6" y="398.45" width="57.37" height="12" style="fill:#142546"/><rect x="69.89" y="326.73" width="20.77" height="12" style="fill:#142546"/><rect x="129.89" y="288.67" width="20.77" height="12" style="fill:#142546"/><rect x="106.49" y="326.73" width="78.63" height="12" style="fill:#142546"/><rect x="36.99" y="288.67" width="72.31" height="12" style="fill:#142546"/>

</g>

</g>

<text y="50" font-size="2em" font-family="Helvetica, Arial, sans-serif">
$DISTANCE km
</text>
</svg>
 
EOF
